{"version":3,"sources":["../../src/pages/atendimento-usuario-materia/atendimento-usuario-materia.module.ts","../../src/pages/atendimento-usuario-materia/atendimento-usuario-materia.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AtendimentoUsuarioMateriaPage } from './atendimento-usuario-materia';\n\n@NgModule({\n  declarations: [\n    AtendimentoUsuarioMateriaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AtendimentoUsuarioMateriaPage),\n  ],\n})\nexport class AtendimentoUsuarioMateriaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/atendimento-usuario-materia/atendimento-usuario-materia.module.ts","import { UtilsProvider } from './../../providers/utils/utils';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { ConexaoApiProvider } from '../../providers/conexao-api/conexao-api';\nimport { Usuario } from '../../model/usuario';\nimport { StorageProvider } from '../../providers/storage/storage';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { StatusBar } from '@ionic-native/status-bar';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-atendimento-usuario-materia',\n  templateUrl: 'atendimento-usuario-materia.html',\n})\nexport class AtendimentoUsuarioMateriaPage {\n\n  //Exibição de áreas - 1º passo\n  requisition: any;\n  areas: Array<any> = [];\n  usuario: Usuario;\n  viewArea: boolean;\n\n  //Exibição de matérias - 2º passo\n  materias: any;\n  private img_materia_64: any = \"data:image/png+xml;base64,\";\n  viewMateria: boolean;\n\n  //Exibição chamado concluído - 3º passo\n  materia: any = {};\n  viewConcluir: boolean;\n  requisitionConcluir: any = {};\n\n  constructor(private conexaoApi: ConexaoApiProvider, private domSanitizer: DomSanitizer,\n    private navCtrl: NavController, private navParams: NavParams, private storage: StorageProvider,\n    private statusBar: StatusBar, private utilsPr: UtilsProvider) {\n\n    this.usuario = new Usuario();\n    this.viewArea = true;\n    this.viewMateria = false;\n    this.viewConcluir = false;\n  }\n\n  ionViewWillEnter() {\n    // let status bar overlay webview\n    this.statusBar.overlaysWebView(false);\n    // set status bar to white\n    this.statusBar.backgroundColorByHexString('#311734');\n\n    this.storage.getInfo(\"usuario\")\n      .then((usuario) => { this.usuario = usuario; });\n\n    this.requisition = this.navParams.get('requisition');\n    this.areas = this.requisition.types;\n  }\n\n  solicitarAtendimento(area) {\n    //Aguardando 2º passo\n    this.conexaoApi.requisitionMatter(this.usuario.token.access_token, area.id, this.usuario.id)\n      .then((rsMatter: any) => {\n        //Se há matérias, exibe-as\n        if (rsMatter.matters.length > 0) {\n          this.viewArea = false;\n          this.viewMateria = true;\n          this.materias = rsMatter.matters;\n          for (let i = 0; i < this.materias.length; i++) {\n\n            this.img_materia_64 += this.materias[i].image;\n            //this.materias[i].image = this.domSanitizer.bypassSecurityTrustUrl(this.img_materia_64);\n\n            this.materias[i].image == null || this.materias[i].image == \"\" ? this.materias[i].image = \"assets/imgs/no-photo.jpg\"\n              : this.materias[i].image = this.domSanitizer.bypassSecurityTrustUrl(this.img_materia_64);\n\n            //Reseta variável para não acrescentar string erroneamente\n            this.img_materia_64 = \"data:image/png+xml;base64,\";\n          }\n\n          //Passa as matérias para a pagina de solicitação para que possa ser feito o 3º passo\n          //this.navCtrl.push('AtendimentoUsuarioSolicitarPage', {rsMatter: rsMatter.matters} );\n        }\n        else {\n          this.utilsPr.alertInformation(\"Não há tutores disponíveis para a área de \" + area.name + \"!\")\n        }\n      })\n      .catch((error) => {\n        if (error.message) {\n          this.utilsPr.alertError(error.message);\n\n        }\n        else {\n          this.utilsPr.alertError(\"Não foi possível abrir chamado para essa matéria. Tente novamente!\");\n        }\n\n      })\n    //console.log(materia, this.requisition.sender_call);\n  }\n\n  //3º PASSO\n  solicitarAtendimentoConcluir(materia) {\n\n    this.conexaoApi.requisitionCreateAll(this.usuario.token.access_token, materia.id, this.usuario.id)\n      .then((requisitionCreatellAll) => {\n        this.materia = materia;\n        this.requisitionConcluir = requisitionCreatellAll;\n        this.viewArea = false;\n        this.viewMateria = false;\n        this.viewConcluir = true;\n        //console.log(\"Veio\", this.requisition,requisitionCreatellAll);\n        /*this.navCtrl.push('AtendimentoUsuarioSolicitarConcluidoPage', {\n          requisition: requisitionCreatellAll,\n          materia: materia, access_token: this.usuario.token.access_token\n        })*/\n      })\n      .catch((error) => {\n        if (error.message) {\n          this.utilsPr.alertError(error.message);\n        }\n        else {\n          this.utilsPr.alertError(\"Não foi possível abrir chamado para essa matéria. Tente novamente!\");\n        }\n\n      })\n  }\n\n  cancelarSolicitacao() {\n    //console.log(this.materia,\"\\n\",this.requisitionConcluir);\n    this.conexaoApi.requisitionCancel(this.usuario.token.access_token, this.requisitionConcluir.id_call)\n      .then((requisitionCancel: any) => {\n        this.utilsPr.alertInformation(requisitionCancel.message)\n        this.navCtrl.pop();\n      })\n      .catch((error) => {\n        this.utilsPr.alertError(\"Não foi possível cancelar a solicitação. Tente novamente!\")\n      })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/atendimento-usuario-materia/atendimento-usuario-materia.ts"],"sourceRoot":""}