{"version":3,"sources":["../../src/pages/atendimento-usuario-materia/atendimento-usuario-materia.module.ts","../../src/pages/atendimento-usuario-materia/atendimento-usuario-materia.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AtendimentoUsuarioMateriaPage } from './atendimento-usuario-materia';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AtendimentoUsuarioMateriaPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AtendimentoUsuarioMateriaPage),\r\n  ],\r\n})\r\nexport class AtendimentoUsuarioMateriaPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/atendimento-usuario-materia/atendimento-usuario-materia.module.ts","import { UtilsProvider } from './../../providers/utils/utils';\r\nimport { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { ConexaoApiProvider } from '../../providers/conexao-api/conexao-api';\r\nimport { Usuario } from '../../model/usuario';\r\nimport { StorageProvider } from '../../providers/storage/storage';\r\nimport { DomSanitizer } from '@angular/platform-browser';\r\nimport { StatusBar } from '@ionic-native/status-bar';\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-atendimento-usuario-materia',\r\n  templateUrl: 'atendimento-usuario-materia.html',\r\n})\r\nexport class AtendimentoUsuarioMateriaPage {\r\n\r\n  //Exibição de áreas - 1º passo\r\n  requisition: any;\r\n  areas: Array<any> = [];\r\n  usuario: Usuario;\r\n  viewArea: boolean;\r\n\r\n  //Exibição de matérias - 2º passo\r\n  materias: any;\r\n  private img_materia_64: any = \"data:image/png+xml;base64,\";\r\n  viewMateria: boolean;\r\n\r\n  //Exibição chamado concluído - 3º passo\r\n  materia: any = {};\r\n  viewConcluir: boolean;\r\n  requisitionConcluir: any = {};\r\n\r\n  constructor(private conexaoApi: ConexaoApiProvider, private domSanitizer: DomSanitizer,\r\n    private navCtrl: NavController, private navParams: NavParams, private storage: StorageProvider,\r\n    private statusBar: StatusBar, private utilsPr: UtilsProvider) {\r\n\r\n    this.usuario = new Usuario();\r\n    this.viewArea = true;\r\n    this.viewMateria = false;\r\n    this.viewConcluir = false;\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    // let status bar overlay webview\r\n    this.statusBar.overlaysWebView(false);\r\n    // set status bar to white\r\n    this.statusBar.backgroundColorByHexString('#311734');\r\n\r\n    this.storage.getInfo(\"usuario\")\r\n      .then((usuario) => { this.usuario = usuario; });\r\n\r\n    this.requisition = this.navParams.get('requisition');\r\n    this.areas = this.requisition.types;\r\n  }\r\n\r\n  solicitarAtendimento(area) {\r\n    //Aguardando 2º passo\r\n    this.conexaoApi.requisitionMatter(this.usuario.token.access_token, area.id, this.usuario.id)\r\n      .then((rsMatter: any) => {\r\n        //Se há matérias, exibe-as\r\n        if (rsMatter.matters.length > 0) {\r\n          this.viewArea = false;\r\n          this.viewMateria = true;\r\n          this.materias = rsMatter.matters;\r\n          for (let i = 0; i < this.materias.length; i++) {\r\n\r\n            this.img_materia_64 += this.materias[i].image;\r\n            //this.materias[i].image = this.domSanitizer.bypassSecurityTrustUrl(this.img_materia_64);\r\n\r\n            this.materias[i].image == null || this.materias[i].image == \"\" ? this.materias[i].image = \"assets/imgs/no-photo.jpg\"\r\n              : this.materias[i].image = this.domSanitizer.bypassSecurityTrustUrl(this.img_materia_64);\r\n\r\n            //Reseta variável para não acrescentar string erroneamente\r\n            this.img_materia_64 = \"data:image/png+xml;base64,\";\r\n          }\r\n\r\n          //Passa as matérias para a pagina de solicitação para que possa ser feito o 3º passo\r\n          //this.navCtrl.push('AtendimentoUsuarioSolicitarPage', {rsMatter: rsMatter.matters} );\r\n        }\r\n        else {\r\n          this.utilsPr.alertInformation(\"Não há tutores disponíveis para a área de \" + area.name + \"!\")\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        if (error.message) {\r\n          this.utilsPr.alertError(error.message);\r\n\r\n        }\r\n        else {\r\n          this.utilsPr.alertError(\"Não foi possível abrir chamado para essa matéria. Tente novamente!\");\r\n        }\r\n\r\n      })\r\n    //console.log(materia, this.requisition.sender_call);\r\n  }\r\n\r\n  //3º PASSO\r\n  solicitarAtendimentoConcluir(materia) {\r\n\r\n    this.conexaoApi.requisitionCreateAll(this.usuario.token.access_token, materia.id, this.usuario.id)\r\n      .then((requisitionCreatellAll) => {\r\n        this.materia = materia;\r\n        this.requisitionConcluir = requisitionCreatellAll;\r\n        this.viewArea = false;\r\n        this.viewMateria = false;\r\n        this.viewConcluir = true;\r\n        //console.log(\"Veio\", this.requisition,requisitionCreatellAll);\r\n        /*this.navCtrl.push('AtendimentoUsuarioSolicitarConcluidoPage', {\r\n          requisition: requisitionCreatellAll,\r\n          materia: materia, access_token: this.usuario.token.access_token\r\n        })*/\r\n      })\r\n      .catch((error) => {\r\n        if (error.message) {\r\n          this.utilsPr.alertError(error.message);\r\n        }\r\n        else {\r\n          this.utilsPr.alertError(\"Não foi possível abrir chamado para essa matéria. Tente novamente!\");\r\n        }\r\n\r\n      })\r\n  }\r\n\r\n  cancelarSolicitacao() {\r\n    //console.log(this.materia,\"\\n\",this.requisitionConcluir);\r\n    this.conexaoApi.requisitionCancel(this.usuario.token.access_token, this.requisitionConcluir.id_call)\r\n      .then((requisitionCancel: any) => {\r\n        this.utilsPr.alertInformation(requisitionCancel.message)\r\n        this.navCtrl.pop();\r\n      })\r\n      .catch((error) => {\r\n        this.utilsPr.alertError(\"Não foi possível cancelar a solicitação. Tente novamente!\")\r\n      })\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/atendimento-usuario-materia/atendimento-usuario-materia.ts"],"sourceRoot":""}